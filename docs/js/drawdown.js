/**
 * drawdown.js
 * (c) Adam Leggett
 * 
 * Modified by:
 * Elias Theis, to handle checkboxes
 * 
 */

function markdown(n){var r=/\\([\\\|`*_{}\[\]()#+\-~])/g,e=/\n *&gt; *([^]*?)(?=(\n|$){2})/g,t=/\n( *)(?:[*\-+]|((\d+)|([a-z])|[A-Z])[.)]) +([^]*?)(?=(\n|$){2})/g,u=/(^|[^A-Za-z\d\\])(([*_])|(~)|(\^)|(--)|(\+\+)|`)(\2?)([^<]*?)\2\8(?!\2)(?=\W|_|$)/g,c=/^.*\n( *\|( *\:?-+\:?-+\:? *\|)* *\n|)/,l=/.*\n/g,a=/\||(.*?[^\\])\|/g;function f(r,e){n=n.replace(r,e)}function o(n,r){return"<"+n+">"+r+"</"+n+">"}function i(n){return n.replace(u,function(n,r,e,t,u,c,l,a,f,g){return r+o(t?f?"strong":"em":u?f?"s":"sub":c?"sup":l?"small":a?"big":"code",i(g))})}function g(n){return n.replace(r,"$1")}var p,s=[],m=0;return n="\n"+n+"\n",f(/</g,"&lt;"),f(/>/g,"&gt;"),f(/\t|\r|\uf8ff/g,"  "),n=function n(r){return r.replace(e,function(r,e){return o("blockquote",n(i(e.replace(/^ *&gt; */gm,""))))})}(n),f(/^([*\-=_] *){3,}$/gm,"<hr/>"),n=function n(r){return r.replace(t,function(r,e,t,u,c,l){var a=o("li",i(l.split(RegExp("\n ?"+e+"(?:(?:\\d+|[a-zA-Z])[.)]|[*\\-+]) +","g")).map(n).join("</li><li>")));return"\n"+(t?'<ol start="'+(u?t+'">':parseInt(t,36)-9+'" style="list-style-type:'+(c?"low":"upp")+'er-alpha">')+a+"</ol>":o("ul",a))})}(n),f(/<\/(ol|ul)>\n\n<\1>/g,""),n=(p=n).replace(/\[([ x])\] +([^\n]+)/g,function(n,r,e){var t=e.replace(/\s/g,"-");return'<input class="form-check-input" type="checkbox" id="'+t+'" name="'+t+'" value="'+e+'"'+("x"===r.trim()?" checked":"")+'><label class="form-check-label" style="margin-left: 1em;" for="'+t+'">'+e+"</label><br>"}),f(/\n((```|~~~).*\n?([^]*?)\n?\2|((    .*?\n)+))/g,function(n,r,e,t,u){return s[--m]=o("pre",o("code",t||u.replace(/^    /gm,""))),m+""}),f(/((!?)\[(.*?)\]\((.*?)( ".*")?\)|\\([\\`*_{}\[\]()#+\-.!~]))/g,function(n,r,e,t,u,c,l){return s[--m]=u?e?'<img src="'+u+'" alt="'+t+'"/>':'<a href="'+u+'">'+g(i(t))+"</a>":l,m+""}),f(/\n(( *\|.*?\| *\n)+)/g,function(n,r){var e=r.match(c)[1];return"\n"+o("table",r.replace(l,function(n,r){return n==e?"":o("tr",n.replace(a,function(n,t,u){return u?o(e&&!r?"th":"td",g(i(t||""))):""}))}))}),f(/(?=^|>|\n)([>\s]*?)(#{1,6}) (.*?)( #*)? *(?=\n|$)/g,function(n,r,e,t){return r+o("h"+e.length,g(i(t)))}),f(/(?=^|>|\n)\s*\n+([^<]+?)\n+\s*(?=\n|<|$)/g,function(n,r){return o("p",g(i(r)))}),f(/-\d+\uf8ff/g,function(n){return s[parseInt(n)]}),n.trim().replace("<table>", "<table class=\"table\">")}
